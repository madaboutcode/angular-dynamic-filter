{"version":3,"sources":["/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/$_lazy_route_resource lazy","/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/app.component.css","/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/app.component.html","/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/app.component.ts","/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/app.module.ts","/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/filter/filter.component.css","/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/filter/filter.component.html","/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/filter/filter.component.ts","/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/schema.ts","/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/environments/environment.ts","/Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/main.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"../../../../../src/$$_lazy_route_resource lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/$$_lazy_route_resource lazy\n// module id = ../../../../../src/$$_lazy_route_resource lazy recursive\n// module chunks = main","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"h1 { \\n    text-align: center;\\n    margin-top: 2rem;\\n}\\n\\n.container {\\n    max-width: 600px;\\n    width: 100%;\\n    margin: 5% auto;\\n    position: relative;\\n}\\n\\na.show-schema-link {\\n    display: block;\\n    position: absolute;\\n    right: 0;\\n    top: 3.5rem;\\n    text-decoration: none;\\n    color: darkgray;\\n}\\n\\ndiv.schema {\\n    overflow: hidden;\\n    max-height: 0;\\n    width: 100%;\\n    float: left;\\n    transition: max-height 0.45s ease-out;\\n    margin-top: 3rem;\\n}\\n\\na.show-schema-link:hover + div.schema, div.schema:hover {\\n    max-height: 900px;\\n    transition: max-height 0.65s ease-out;\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/app.component.css\n// module id = ../../../../../src/app/app.component.css\n// module chunks = main","module.exports = \"<div class=\\\"container\\\">\\n  <h1>\\n    {{ title }}\\n  </h1>\\n  <a class=\\\"show-schema-link\\\" href=\\\"#\\\">Show Schema</a>\\n  <div class=\\\"schema\\\">\\n      <pre class=\\\"code\\\">{{schema|json}}</pre>\\n    </div>\\n  <app-filter [schema]=\\\"schema\\\"></app-filter>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/app.component.html\n// module id = ../../../../../src/app/app.component.html\n// module chunks = main","import { Component } from '@angular/core';\nimport { EXAMPLE_SCHEMA, Property } from './schema';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'Filter Component Demo';\n  schema = EXAMPLE_SCHEMA;\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { AppComponent } from './app.component';\nimport { FilterComponent } from './filter/filter.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    FilterComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/app.module.ts","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host {\\n    margin-top: 2rem;\\n    display: block;\\n}\\n\\ntextarea {\\n    width: 100%;\\n    height: 15rem;\\n    font-family: monospace;\\n}\\n\\n.row {\\n    width: 100%;\\n    clear: both;\\n    padding: 1rem 0;\\n}\\n\\n.field-group {\\n    width: 100%;\\n    clear: both;\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n}\\n\\n.field-group input, .field-group select {\\n    width: 100%;\\n}\\n\\nlabel {\\n    text-transform: uppercase;\\n    font-size: .8rem;\\n    letter-spacing: 2px;\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/filter/filter.component.css\n// module id = ../../../../../src/app/filter/filter.component.css\n// module chunks = main","module.exports = \"<form (ngSubmit)=\\\"onSubmit(form.value)\\\" [formGroup]=\\\"form\\\">\\n  <div *ngFor=\\\"let prop of schema; \\\">\\n    <div class=\\\"row\\\">\\n      <label>{{prop.name | titlecase }}</label>\\n      <div [ngSwitch]=\\\"prop.type\\\" class=\\\"field-group\\\">\\n        <ng-container *ngSwitchCase=\\\"'string'\\\">\\n          <div class=\\\"col6\\\">\\n            <input type=\\\"text\\\" [formControlName]=\\\"prop.name\\\" [id]=\\\"prop.name\\\" />\\n          </div>\\n          <div class=\\\"col2\\\" style=\\\"text-align: center;\\\">\\n              operator\\n          </div>\\n          <div class=\\\"col4\\\">\\n            <select [formControlName]=\\\"prop.name+'__strop'\\\">\\n              <option *ngFor=\\\"let option of stringOpNames\\\" [value]=\\\"option\\\">{{option}}</option>\\n            </select>\\n          </div>\\n        </ng-container>\\n        <ng-container *ngSwitchCase=\\\"'date'\\\">\\n            <div class=\\\"col5\\\">\\n              <input type=\\\"date\\\" [formControlName]=\\\"prop.name+'__gt'\\\" [id]=\\\"prop.name+'__gt'\\\" />\\n            </div>\\n            <div class=\\\"col2\\\" style=\\\"text-align: center;\\\">\\n                to\\n            </div>\\n            <div class=\\\"col5\\\">\\n                <input type=\\\"date\\\" [formControlName]=\\\"prop.name+'__lt'\\\" [id]=\\\"prop.name+'__lt'\\\" />\\n            </div>\\n        </ng-container>\\n        <ng-container *ngSwitchCase=\\\"'number'\\\">\\n            <div class=\\\"col5\\\">\\n              <input type=\\\"number\\\" [formControlName]=\\\"prop.name+'__gt'\\\" [id]=\\\"prop.name+'__gt'\\\" />\\n            </div>\\n            <div class=\\\"col2\\\" style=\\\"text-align: center;\\\">\\n                to\\n            </div>\\n            <div class=\\\"col5\\\">\\n                <input type=\\\"number\\\" [formControlName]=\\\"prop.name+'__lt'\\\" [id]=\\\"prop.name+'__lt'\\\" />\\n            </div>\\n        </ng-container>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"row\\\" style=\\\"text-align: center\\\">\\n    <button type=\\\"submit\\\">Search</button>\\n  </div>\\n</form>\\n\\n\\n<ng-container  *ngIf=\\\"query\\\">\\n<h3>query</h3>\\n<pre class=\\\"code\\\">{{query|json}}</pre>\\n</ng-container>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/filter/filter.component.html\n// module id = ../../../../../src/app/filter/filter.component.html\n// module chunks = main","import { Component, OnInit, Input } from '@angular/core';\nimport { FormBuilder, FormGroup, FormControl } from '@angular/forms';\n\nimport { Property } from '../schema';\n\n@Component({\n  selector: 'app-filter',\n  templateUrl: './filter.component.html',\n  styleUrls: ['./filter.component.css']\n})\nexport class FilterComponent implements OnInit {\n  @Input() schema: Property[];\n  form: FormGroup;\n  stringOperators = {\n    'contains': s => `/${s}/`,\n    'startswith': s => `/^${s}/`,\n    'equals': s => `/${s}$/`\n  };\n  stringOpNames;\n  query;\n\n  constructor() {\n    this.stringOpNames = Object.keys(this.stringOperators);\n  }\n\n  ngOnInit() {\n    const formFields = this.generateSearchFields();\n    this.form = new FormGroup(formFields);\n  }\n\n  generateSearchFields() {\n    const formFields = {};\n    this.schema.forEach(field => {\n      if (this.isRangeField(field)) {\n        formFields[`${field.name}__gt`] = new FormControl('');\n        formFields[`${field.name}__lt`] = new FormControl('');\n      }\n      if (this.isString(field)) {\n        formFields[field.name] = new FormControl('');\n        formFields[`${field.name}__strop`] = new FormControl(this.stringOpNames[0]);\n      }\n    });\n    return formFields;\n  }\n\n  isRangeField(field: Property) {\n    return [ 'number', 'date' ].indexOf(field.type) > -1;\n  }\n\n  isString(field: Property) {\n    return field.type === 'string';\n  }\n\n  onSubmit(form) {\n    this.query = this.buildQuery(form);\n  }\n\n  buildQuery(form) {\n    const query = {};\n    Object.keys(form).forEach(key => {\n      const [ prop, op ] = key.split('__');\n      if (!op) { return; }\n\n      let operator = null, value = null;\n\n      if (op === 'strop') {\n        operator = '$regex';\n        if (form[prop]) {\n          value = this.stringOperators[form[key]](form[prop]);\n        }\n      } else {\n        operator = op;\n        value = form[key];\n      }\n      if ( value ) {\n        query[prop] = Object.assign({[operator]: value}, query[prop]);\n      }\n    });\n    return query;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/filter/filter.component.ts","export class Property {\n    name: string;\n    type: string;\n}\n\nexport const EXAMPLE_SCHEMA: Property[] = [\n    { name: 'firstName', type: 'string' },\n    { name: 'lastName', type: 'string' },\n    { name: 'joiningDate', type: 'date' },\n    { name: 'salary', type: 'number' }\n];\n\n\n\n// WEBPACK FOOTER //\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/app/schema.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n\n\n\n// WEBPACK FOOTER //\n// /Users/ajeesh/projects/prion/consulting/decisionengines/poc/filter/src/main.ts"],"sourceRoot":"webpack:///"}